---
import MainLayout from '../layouts/MainLayout.astro';
import { getCollection } from "astro:content";

// Get content collection data
const allPosts = await getCollection("blog");

// Sort by publish date (most recent first)
const sortedPosts = allPosts.sort((a, b) => {
  return new Date(b.data.publishDate).getTime() - new Date(a.data.publishDate).getTime();
});
const articles = [
  {
    id: 1,
    title: "The Rise of Multimodal AI: Transforming Human-Computer Interaction",
    excerpt: "Explore how multimodal AI systems are revolutionizing the way we interact with technology, combining vision, language, and audio processing.",
    category: "Machine Learning",
    readTime: "8 min read",
    publishDate: "Dec 15, 2024",
    image: "/futuristic-ai-neural-network.png",
    featured: true,
  },
  {
    id: 2,
    title: "Ethical AI Development: Building Responsible Systems",
    excerpt: "A deep dive into the principles and practices needed to develop AI systems that are fair, transparent, and beneficial for society.",
    category: "AI Ethics",
    readTime: "12 min read",
    publishDate: "Dec 12, 2024",
    image: "/ai-ethics-balance.png",
    featured: true,
  },
  {
    id: 3,
    title: "Quantum Computing Meets AI: The Next Frontier",
    excerpt: "Discover how quantum computing is poised to accelerate AI capabilities and solve previously intractable problems.",
    category: "Quantum AI",
    readTime: "10 min read",
    publishDate: "Dec 10, 2024",
    image: "/quantum-ai-integration.png",
    featured: true,
  },
  {
    id: 4,
    title: "Large Language Models in 2025: What's Next?",
    excerpt: "An analysis of the current state and future directions of large language models.",
    category: "LLMs",
    readTime: "6 min read",
    publishDate: "Dec 8, 2024",
    image: "/abstract-neural-network-text.png",
  },
  {
    id: 5,
    title: "AI in Healthcare: Breakthrough Applications",
    excerpt: "How artificial intelligence is transforming medical diagnosis and treatment.",
    category: "Healthcare AI",
    readTime: "9 min read",
    publishDate: "Dec 5, 2024",
    image: "/medical-ai-hologram.png",
  },
  {
    id: 6,
    title: "The Economics of AI: Market Trends and Predictions",
    excerpt: "Understanding the economic impact and market dynamics of AI technologies.",
    category: "AI Business",
    readTime: "7 min read",
    publishDate: "Dec 3, 2024",
    image: "/financial-ai-growth.png",
  },
  {
    id: 7,
    title: "Computer Vision: From Pixels to Understanding",
    excerpt: "Exploring the evolution of computer vision and its applications in modern AI systems.",
    category: "Computer Vision",
    readTime: "11 min read",
    publishDate: "Nov 30, 2024",
    image: "/computer-vision-neural-network-eyes.png",
  },
  {
    id: 8,
    title: "Natural Language Processing: Breaking Language Barriers",
    excerpt: "How NLP is enabling machines to understand and generate human language.",
    category: "NLP",
    readTime: "9 min read",
    publishDate: "Nov 28, 2024",
    image: "/nlp-text-analysis.png",
  },
  {
    id: 9,
    title: "AI Safety: Ensuring Beneficial AI Development",
    excerpt: "Critical considerations for developing AI systems that are safe and beneficial for humanity.",
    category: "AI Safety",
    readTime: "14 min read",
    publishDate: "Nov 25, 2024",
    image: "/ai-safety-shield.png",
  },
];

const categories = ["All", "Machine Learning", "AI Ethics", "Quantum AI", "Healthcare AI", "AI Business", "Computer Vision", "NLP", "AI Safety"];
---

<MainLayout title="Newsletter Archive - The African Stack">
    <main>
      <!-- Header -->
      <section class="py-16 lg:py-24 bg-gradient-to-br from-blue-50 to-white dark:from-blue-950/20 dark:to-background">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
          <h1 class="font-serif font-bold text-4xl sm:text-5xl lg:text-6xl text-foreground mb-6 leading-tight">
            Newsletter <span class="text-blue-600">Archive</span>
          </h1>
          <p class="text-xl text-muted-foreground leading-relaxed max-w-3xl mx-auto">
            Past issues of The African Stack newsletter covering Africa's data, AI, and infrastructure movement.
          </p>
        </div>
      </section>

      <!-- Filter Section -->
      <section class="py-8 border-b border-border">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="flex flex-wrap gap-3 justify-center">
            {categories.map((category) => (
              <button
                class={`px-4 py-2 rounded-full text-sm font-medium transition-colors ${
                  category === "All" 
                    ? "bg-blue-600 text-white" 
                    : "bg-muted text-muted-foreground hover:bg-blue-100 hover:text-blue-700 dark:hover:bg-blue-900/30"
                }`}
                data-category={category}
              >
                {category}
              </button>
            ))}
          </div>
        </div>
      </section>

      <!-- Articles Grid -->
      <section class="py-16 lg:py-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
            {articles.map((article) => (
              <article class="group hover:shadow-xl transition-all duration-300 border border-border hover:border-blue-200 dark:hover:border-blue-800 hover:-translate-y-1 rounded-lg overflow-hidden" data-category={article.category}>
                <div class="aspect-video overflow-hidden">
                  <img
                    src={article.image || "/placeholder.svg"}
                    alt={article.title}
                    class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                  />
                </div>
                <div class="p-6">
                  <div class="flex items-center gap-2 mb-3">
                    <span class="bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 px-2 py-1 rounded-full text-xs font-medium">
                      {article.category}
                    </span>
                    {article.featured && (
                      <span class="bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300 px-2 py-1 rounded-full text-xs font-medium">
                        Featured
                      </span>
                    )}
                  </div>
                  <h3 class="font-serif font-semibold text-xl leading-tight group-hover:text-blue-600 transition-colors mb-3">
                    <a href={`/article/${article.id}`}>{article.title}</a>
                  </h3>
                  <p class="text-muted-foreground mb-4 leading-relaxed">{article.excerpt}</p>
                  <div class="flex items-center gap-4 text-sm text-muted-foreground">
                    <div class="flex items-center gap-1">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                      </svg>
                      {article.publishDate}
                    </div>
                    <div class="flex items-center gap-1">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                      </svg>
                      {article.readTime}
                    </div>
                  </div>
                </div>
              </article>
            ))}
          </div>
        </div>
      </section>
    </main>
</MainLayout>

<script>
  // Category filtering functionality
  const filterButtons = document.querySelectorAll('[data-category]');
  const articles = document.querySelectorAll('article[data-category]');

  filterButtons.forEach(button => {
    button.addEventListener('click', () => {
      const selectedCategory = button.getAttribute('data-category');
      
      // Update active button
      filterButtons.forEach(btn => {
        btn.classList.remove('bg-blue-600', 'text-white');
        btn.classList.add('bg-muted', 'text-muted-foreground', 'hover:bg-blue-100', 'hover:text-blue-700', 'dark:hover:bg-blue-900/30');
      });
      
      button.classList.remove('bg-muted', 'text-muted-foreground', 'hover:bg-blue-100', 'hover:text-blue-700', 'dark:hover:bg-blue-900/30');
      button.classList.add('bg-blue-600', 'text-white');
      
      // Filter articles
      articles.forEach(article => {
        const articleCategory = article.getAttribute('data-category');
        
        if (selectedCategory === 'All' || articleCategory === selectedCategory) {
          article.style.display = 'block';
        } else {
          article.style.display = 'none';
        }
      });
    });
  });
</script>
